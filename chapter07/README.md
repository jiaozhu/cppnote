# 函数

如果使用函数，必须完成如下工作

* 提供函数定义
* 提供函数原型
* 调用函数

库函数是已经定义和编译好的函数，同时可以使用标准库的头文件提供其原型，因此只需要正确的调用这种函数即可。

### 定义函数

可以将函数分成两类：没有返回值的函数和有返回值的函数。没有返回值的函数被称为void函数。

```
void functionName(parameterList){

}

typeName functionName(parameterList）{

}
```

### 函数原型和函数调用

- 为什么需要原型

效率的问题。

- 原型的语法

函数原型是一条语句，因此必须以分号结束。获得原型最简单的方法是，复制函数定义中的函数头，并添加分号。

```
double cube（double x）;
```

然后，函数原型不要求提供变量名，有类型列表就足够了。

```
void cheers(int);
```

- 原型的功能
	1. 编译器正确处理函数返回值
	2. 编译器检查使用的参数数目是否正确
	3. 编译器检查使用的参数类型是否正确。如果不正确，则转换为正确的类型。
	
函数可以有多个参数，在调用函数时，只需要用逗号将这些参数分开即可。

 
### 函数如何使用指针来处理数组

在大多数的情况下，c++和c一样，也将数组名视为指针

```
cookies = &cookies[0];
```

在c++中，当（且仅当）用于函数头或者函数原型中时，int * arr和int arr[]的含义才是相同的。它们都意味着arr是一个int指针。

将数组做为参数意味着什么 ？

意味着，程序实际上并没有将数组内容传递给函数，而是将数组的位置（地址）、包含的元素种类（类型）以及元素数目提交给函数。有了这些信息，函数便可以使用原来的数组。传递常规变量时，函数将使用该变量的拷贝;但传递数组时，函数将使用原来的数组。

数组名与指针对应是好事吗？确实。将数组地址作为参数可以节省复制整个数组所需要的时候和内存。

## 函数指针

与数据项相似，函数也有地址。函数的地址是存储其机器语言代码的内存的开始地址。

可以编写将另一个函数的地址作为参数的函数。这样，第一个函数能够找到第二个函数，并运行它。与直接调用另一个函数相比，这种方法很笨拙，但它允许在不同的时间的传递不同的函数的地址，这意味着可以在不同的时间使用不同的函数。

假设要设计一个estimate()的函数，估算编写指定行数的代码所需要的时间，并且希望不同的程序员都将使用该函数，但该函数允许每个程序员提供自己的算法来估算时间。为实现这种目标，采用的机制是：将程序员要使用的算法函数的地址传递给estimate()。

* 获取函数的地址
* 声明一个函数指针
* 使用函数指针来调用函数

#### 获取函数地址

获取函数和地址很简单，只要使用函数名（后面不跟参）即可。即：tink()是一个函数，则think就是该函数的地址。要将函数作为参数进行传递，必须传递函数名。

```
process(think);  //传递think函数的地址给process
thought(think()); //传递think的返回值给thought
```


#### 声明函数指针

声明指向某种数据类型的指针时，必须指定指针指向的类型。同样 ，声明指向函数的指针时，也必须指定指向的函数的类型。

```
duoble pam(int); //prototype
double (*pf) (int); //pf points to a fuction that takes one int argument and that returns type double.
```

(*pf) 为提供正确的运算符优化级。

#### 使用函数指针

```
double pam(int);
double (*pf)(int);
pf = pam;
double x = pam(4);
double y = (*pf)(5);
```

```
void estimate(int lines,double (*pf)(int)){
	using namespace std;
	cout << lines << " lines will take ";
	cout << (*pf)(lines) << " hour(s)\n";
}
```

此时在第二个参数（double (*pf)(int)）中double 相当于参数的数据类型,(*pf)(int) 相当于参数的名称,因此下面的函数体内可以直接打印和使用这个参数的名称，只是这里恰巧使用了函数指针的技术而矣。

## 总结

函数是c++的编程模块。要使用函数，必须提供定义和原型，并调用函数。函数定义是实现函数功能的代码;函数原型描述了函数的接口;传递给函数的值的数目和种类以及函数的返回类型。函数调用使得程序将参数传递给函数，并执行代码。

```
typeName arr[];
typeName * arr;
```

这两个声明都表明：arr是指向typeName的指针，但是在编写函数代码时，可以像使用数组名那样使用arr来访问元素：arr[i].

