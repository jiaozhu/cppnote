# 函数探幽

## 内联函数

内联函数是c++为提高程序运行速度所做的一项改进。常规函数和内联函数之间的主要区别不在于编写的方式，而在于c++编译器如何将它们组合到程序中。

常规函数：由一组机器语言指令组成。程序运行时，操作系统将这些指令载入到内存中去，因此每条指令都有特定的内存地址。计算机逐步执行这些指令。如果有分支，将路过一些指令，向前或向后跳到特定的地址。常规函数也使程序跳到另一个地址（函数的地址），并在函数结束时返回。执行到函数调用指令时，程序将在函数调用后立即存储该指令的内存地址，并将函数参数复制到堆栈中，跳到标记函数起点的内存单元，执行代码，然后跳回到地址被保存的指令上。这样，来回的跳跃并记录益，意味着使用函数时，需要一定的开销。

内联函数：内联函数的编译代码与其它的程序代码内联起来，编译器将使用相应的函数代码替换函数调用。对于内联代码，程序无需跳转和记录位置。因此比常规函数要快，但代价是需要占用更多的内存。

方法：

* 在函数声明前加上关键字inline
* 在函数定义前加上关键字inline

## 引用变量

c++新增了一种复合类型：引用变量。引用是已定义的变量的别名。引用变量主要的用途是作函数的形参。通过将引用变量用作参数，函数将使用原始的数据，而不是其副本。这样除指针之外 ，引用也为函数处理大型结构提供了一种非常方便的途径，同时对于设计类来说，引用也是必不呆少的。

### 创建引用变量

```
int rats;
int & rodents = rats;
```

### 将引用用作函数参数

引用经常被用途函数参数，使得函数中的变量名成为调用程序中的变量的别名。这种传递的方法称为按引用传递。c语言只能按值传递。按值传递导致被调用函数调用程序的值的拷贝。

使用引用和指针都可以成功的交换两个变量的值，而按值传递的方法没能完成这项任务。

### 引用的属性和特别之处

如果使用引用参数，在引用参数做一些计算时，将修改函数之外的变量的值，这点很重要，如果我们只是想传递值进行计算的，这将违背我们的意愿，这时候更需要按值传递。

### 默认参数

在函数的原型中，加入参数的默认值

```
void testFun(int n=1);
```

### 函数重载

函数多态是C++在c语言的基础上新增的功能。默认参数让您能够使用不同数目的参数调用同一个函数，而函数多态（重载）让您能够使用多个同名的函数。术语多态指的是有多种形式，因此函数多态允许函数可以有多种形式。

函数重载的关键是函数的参数列表。

```
void print(const char * str,int width);
void print(double d ,int width);
void print(long l,int width);
```

### 函数模板

函数模板是通用的函数描述，也就是说，它们使用泛型来定义函数，其中的泛型可用具体的类型（int , double）替换 。

```
template <typename anyType>
void Swap(anyType &a,anyType &b){
	anyType temp;
	temp = a;
	a = b;
	b = temp;
}
```

第一行指出要建立一个模板，并将类型命名为anytype。关键字：template和tyepname是必需的，除非可以使用关键字class代替typename。必须使用尖括号。类型名可以任意选择。

```
template <class AnyType>
void swap(AnyType &a,AnyType &b)
{
	AnyType temp;
	temp = a;
	a = b;
	b = temp;
}
```



